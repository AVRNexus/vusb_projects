<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0032)http://vusb.wikidot.com/examples -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Features by Example - V-USB</title>
    
    
    
    <script type="text/javascript" async="" src="./Features by Example - V-USB_files/vglnk.js"></script><script type="text/javascript" async="" src="./Features by Example - V-USB_files/quant.js"></script><script type="text/javascript" async="" src="./Features by Example - V-USB_files/dc.js"></script><script async="" type="text/javascript" src="./Features by Example - V-USB_files/gpt.js"></script><script type="text/javascript">
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type="text/javascript">
googletag.cmd.push(function() {
    // DEFINE DFP SLOTS
googletag.defineSlot('/1030917/wikidot_free_sites_top_728x90', [728, 90], 'div-gpt-ad-1410946564449-1').addService(googletag.pubads());
googletag.defineSlot('/1030917/wikidot_free_sites_bottom_300x250', [300, 250], 'div-gpt-ad-1410946564449-0').addService(googletag.pubads());
googletag.defineOutOfPageSlot('/1030917/out_of_page', 'div-gpt-ad-1411637977813-0-oop').addService(googletag.pubads());

// googletag.pubads().enableSingleRequest();
googletag.pubads().collapseEmptyDivs(true, true);
googletag.pubads().setTargeting("w_name", "vusb");
googletag.pubads().setTargeting("w_domain", "com.wikidot.vusb");
googletag.pubads().setTargeting("w_verified", "true");
if(["software","hardware"]){googletag.pubads().setTargeting("w_cats", ["software","hardware"]);}
if(false){googletag.pubads().setTargeting("w_mn", "true");}
googletag.enableServices();
});
</script>
<script type="text/javascript" src="./Features by Example - V-USB_files/init.combined.js"></script>
    <script type="text/javascript">
        var URL_HOST = 'www.wikidot.com';
        var URL_DOMAIN = 'wikidot.com';
        var USE_SSL =  true ;
        var URL_STATIC = 'http://d3g0gp89917ko0.cloudfront.net/v--36f39eeea923';
        // global request information
        
        var WIKIREQUEST = {};
        WIKIREQUEST.info = {};
        
        WIKIREQUEST.info.domain = "vusb.wikidot.com";
        WIKIREQUEST.info.siteId = 40656;
        WIKIREQUEST.info.siteUnixName = "vusb";
        WIKIREQUEST.info.categoryId = 226337;
        WIKIREQUEST.info.themeId = 2437;
        WIKIREQUEST.info.requestPageName = "examples";
        OZONE.request.timestamp = 1450879828;
        OZONE.request.date = new Date();
        WIKIREQUEST.info.lang = 'en';
                WIKIREQUEST.info.pageUnixName = "examples";
        WIKIREQUEST.info.pageId = 1119559;
                        WIKIREQUEST.info.lang = "en";
        OZONE.lang = "en";
        var isUAMobile = !!/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    </script>
    
    


    
        <script type="text/javascript">
    
        require.config({
            baseUrl: URL_STATIC + '/common--javascript',
            paths: {
                'jquery.ui': 'jquery-ui.min',
                'jquery.form': 'jquery.form'
            }
        });
    
    </script>
    
    
            
    
    
    
    
    <meta http-equiv="content-language" content="en">
    <script type="text/javascript" src="./Features by Example - V-USB_files/WIKIDOT.combined.js"></script>
        
    
    <style type="text/css">
body {
  background-position: center 24px;
}
</style>
<style type="text/css" id="internal-style">
        
        /* modules */
        
                
        /* theme */
                    @import url(http://d3g0gp89917ko0.cloudfront.net/v--36f39eeea923/common--theme/base/css/style.css);
                    @import url(http://d3g0gp89917ko0.cloudfront.net/v--36f39eeea923/common--theme/webbish2/css/style.css);
            </style>
    
        
        
        
    <link rel="shortcut icon" href="http://vusb.wikidot.com/local--favicon/favicon.gif">
    <link rel="icon" type="image/gif" href="http://vusb.wikidot.com/local--favicon/favicon.gif">
    
            <link rel="apple-touch-icon" href="http://vusb.wikidot.com/common--images/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="72x72" href="http://vusb.wikidot.com/common--images/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="http://vusb.wikidot.com/common--images/apple-touch-icon-114x114.png">
        
        
            <link rel="alternate" type="application/wiki" title="Edit this page" href="javascript:WIKIDOT.page.listeners.editClick()">
    
        <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-18234656-1']);
        _gaq.push(['_setDomainName', 'none']);
        _gaq.push(['_setAllowLinker', true]);
        _gaq.push(['_trackPageview']);

        _gaq.push(['old._setAccount', 'UA-68540-5']);
        _gaq.push(['old._setDomainName', 'none']);
        _gaq.push(['old._setAllowLinker', true]);
        _gaq.push(['old._trackPageview']);

            </script>
    
    <script type="text/javascript">
        window.google_analytics_uacct = 'UA-18234656-1';
        window.google_analytics_domain_name = 'none';
    </script><style type="text/css"></style>
    
    <script src="./Features by Example - V-USB_files/pubads_impl_78.js" async=""></script><script type="text/javascript" async="" src="http://a.getgamers.eu/?id=9877320"></script></head>
<body id="html-body">
<div id="skrollr-body">
<a name="page-top"></a>
<div id="navi-bar">
  <a class="logo" href="http://www.wikidot.com/">
    <span>Wikidot.com</span>
  </a>
  
  <div class="new-site">
    <form method="get" action="http://www.wikidot.com/new-site">
      <input class="text empty" type="text" name="address" value="site-name">.wikidot.com
    </form>
  </div>
  
    <div class="share">
    <span>Share on</span>
    <a class="twitter" target="_blank" rel="nofollow" href="http://twitter.com/home?status=Features%20by%20Example%20-%20V-USB+http%3A%2F%2Fvusb.wikidot.com%2Fexamples" title="Share on Twitter"><img src="./Features by Example - V-USB_files/twitter.png" alt="twitter"></a>  
    <a class="facebook" target="_blank" rel="nofollow" href="http://www.facebook.com/share.php?u=http%3A%2F%2Fvusb.wikidot.com%2Fexamples&amp;t=Features%20by%20Example%20-%20V-USB" title="Share on Facebook"><img src="./Features by Example - V-USB_files/facebook.gif" alt="Facebook"></a>  
    <a class="delicious" target="_blank" rel="nofollow" href="http://delicious.com/save" title="Share on Delicious"><img src="./Features by Example - V-USB_files/delicious.png" alt="Delicious"></a>
    <a class="digg" target="_blank" rel="nofollow" href="http://digg.com/submit?url=http%3A%2F%2Fvusb.wikidot.com%2Fexamples&amp;title=Features%20by%20Example%20-%20V-USB" title="Post to Digg"><img src="./Features by Example - V-USB_files/digg.png" alt="Digg"></a>
    <a class="reddit" href="http://www.reddit.com/submit?url=http%3A%2F%2Fvusb.wikidot.com%2Fexamples" rel="nofollow" target="_blank" title="Post to Reddit"><img src="./Features by Example - V-USB_files/reddit.png" alt="Reddit" border="0"></a>
    <a class="stumbleupon" href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Fvusb.wikidot.com%2Fexamples" rel="nofollow" target="_blank" title="Post to StumbleUpon"><img src="./Features by Example - V-USB_files/stumble.png" alt="Reddit" border="0"></a>
  </div>
    
      <a class="join" href="javascript:;" onclick="WIKIDOT.page.listeners.join(event, &#39;unified&#39;)">Join this site</a>
    
      <div class="action-buttons">
      <a href="javascript:;" onclick="WIKIDOT.page.listeners.editClick(event)" title="Click here to edit contents of this page.">Edit</a>
      <a href="javascript:;" onclick="WIKIDOT.page.listeners.historyClick(event)" title="Check out how this page has evolved in the past.">History</a>
      <a href="javascript:;" onclick="WIKIDOT.page.listeners.editTags(event)" title="Edit tags for this page.">Tags</a>
      <a href="javascript:;" onclick="WIKIDOT.page.listeners.viewSourceClick(event)" title="View wiki source for this page without editing.">Source</a>
    </div>
    
  <a class="random-site" href="http://vusb.wikidot.com/random-site.php" title="Go to a random Wikidot site.">Explore Â»</a>
  </div>
<div id="navi-bar-shadow">&nbsp;</div>


<script type="text/javascript">
  //<![CDATA[
  $j(function(){
    var uri = window.location.href;
    var title = document.title
    
    $j('#navi-bar .share a').each(function(){
      $t = $j(this);
      var u = $t.attr('href');
      u = u.replace(/TITLE/, encodeURIComponent(title)).replace(/URI/, encodeURIComponent(uri));
      $t.attr('href', u);
    });
    
    $j('#navi-bar .share .facebook').click(function(e){
      window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(uri)+'&t='+encodeURIComponent(title),'sharer','toolbar=0,status=0,width=626,height=436');
      e.preventDefault();
    });
    $j('#navi-bar .share .delicious').click(function(e){
      window.open('http://delicious.com/save?v=5&amp;noui&amp;jump=close&amp;url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title), 'delicious','toolbar=no,width=550,height=550');
      e.preventDefault();
    });
  });
  
	$j('#navi-bar .new-site form').submit(function(e){
	  e.preventDefault();
	  var $i = $j('#navi-bar .new-site form input.text');
	  if($i.hasClass('empty')){
	    	var w = new OZONE.dialogs.ErrorDialog();
  			w.content = "You need to enter a valid web address for your new wiki.";
  			w.show();
  			return;
    }
    var siteName = $i.attr('value');
    siteName = siteName.replace(/^\s+/, '').replace(/\s+$/,'');
		var p = {};
		p.action = 'wiki/special/NewWikiWidgetAction';
		p.event = 'newWiki';
		p.siteName = siteName;
		OZONE.ajax.requestModule(null, p, function(r){
		  if(r.status == 'site_exists'){
		    window.location.href = 'http://' + siteName + '.' + URL_DOMAIN;
		    return;
		  }
		  if(!WIKIDOT.utils.handleError(r)) {return;}
  		// seems fine.
  		window.location.href='http://'+URL_HOST+'/new-site/address/'+r.unixName;
		});
	});
	$j('#navi-bar .new-site form input.text').focus(function(){
	  var $t = $j(this);
	  if($t.hasClass('empty')){
	    $t.removeClass('empty');
	    $t.attr('value', '');
	  }
	});
	//]]>
</script>


<div id="container-wrap-wrap">
    <div id="container-wrap">
        <div id="container">
            <div id="header">
              <h1><a href="http://vusb.wikidot.com/"><span>V-USB</span></a></h1>
                
                    <h2><span>A Firmware-Only USB Driver for the AVR</span></h2>
                
                
                <!-- google_ad_section_start(weight=ignore) -->
                
                <div id="search-top-box" class="form-search">
    <form id="search-top-box-form" action="http://vusb.wikidot.com/dummy" class="input-append">
        <input id="search-top-box-input" class="text empty search-query" type="text" size="15" name="query" value="Search this site" onfocus="if(YAHOO.util.Dom.hasClass(this, &#39;empty&#39;)){YAHOO.util.Dom.removeClass(this,&#39;empty&#39;); this.value=&#39;&#39;;}"><input class="button btn" type="submit" name="search" value="Search">
    </form>
</div>
                
                
                <div id="login-status"><a href="javascript:;" onclick="WIKIDOT.page.listeners.createAccount(event)" class="login-status-create-account btn">Create account</a> <span>or</span> <a href="javascript:;" onclick="WIKIDOT.page.listeners.loginClick(event)" class="login-status-sign-in btn btn-primary">Sign in</a> </div>
                <div id="header-extra-div-1"><span></span></div><div id="header-extra-div-2"><span></span></div><div id="header-extra-div-3"><span></span></div>
            </div>
            
            <div id="content-wrap">
                
                    <div id="side-bar">
                        


                        

<h2><span>Navigation</span></h2>
<ul>
<li><a href="http://vusb.wikidot.com/start">About this Wiki</a></li>
<li><a href="http://vusb.wikidot.com/hardware">Hardware Considerations</a></li>
<li><a href="http://vusb.wikidot.com/usb-device-classes">USB Device Classes</a></li>
<li><a href="http://vusb.wikidot.com/driver-api">Driver API</a></li>
<li><a href="http://vusb.wikidot.com/host-software">Host Software</a></li>
<li><a href="./Features by Example - V-USB_files/Features by Example - V-USB.html" class="active">Features by Example</a></li>
<li><a href="http://vusb.wikidot.com/troubleshooting">Troubleshooting</a></li>
<li><a href="http://vusb.wikidot.com/hosted-projects">Projects Hosted on Wiki</a></li>
</ul>
<h2><span>Utilities</span></h2>
<ul>
<li><a href="http://vusb.wikidot.com/add-a-page">Add a Page</a></li>
<li><a href="http://vusb.wikidot.com/system:recent-changes">Recent Changes</a></li>
<li><a href="http://vusb.wikidot.com/system:join">Become a Member</a></li>
<li><a href="http://vusb.wikidot.com/system:members">Site Members</a></li>
<li><a href="http://vusb.wikidot.com/admin:manage">Manage this Site</a></li>
</ul>
<p style="text-align: center;"><span style="font-size:80%;"><a href="http://vusb.wikidot.com/nav:side">edit menu</a></span></p>

                        


                    </div>
                
                
                <!-- google_ad_section_end -->
                
                <div id="main-content">
                    <div id="action-area-top"></div>
                    
                    
                        <div id="page-title">
                            Features by Example
                        </div>
                    

                    

                                    <!-- wikidot_top_728x90 -->
<div id="div-gpt-ad-1410946564449-1" style="display: none" class="wd-adunit wd-adunit-dfp wd-adunit-above_content">

<script type="text/javascript">
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1410946564449-1'); });
</script>
<div id="google_ads_iframe_/1030917/wikidot_free_sites_top_728x90_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1030917/wikidot_free_sites_top_728x90_0" name="google_ads_iframe_/1030917/wikidot_free_sites_top_728x90_0" width="728" height="90" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:&quot;&lt;html&gt;&lt;body style=&#39;background:transparent&#39;&gt;&lt;/body&gt;&lt;/html&gt;&quot;" style="border: 0px; vertical-align: bottom;"></iframe></div><iframe id="google_ads_iframe_/1030917/wikidot_free_sites_top_728x90_0__hidden__" name="google_ads_iframe_/1030917/wikidot_free_sites_top_728x90_0__hidden__" width="0" height="0" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:&quot;&lt;html&gt;&lt;body style=&#39;background:transparent&#39;&gt;&lt;/body&gt;&lt;/html&gt;&quot;" style="border: 0px; vertical-align: bottom; visibility: hidden; display: none;"></iframe></div>

            


                    <div id="page-content">
                        

<p>In this section we list various features of V-USB and give examples how they can be used or how a particular functionality can be implemented.</p>
<h2 id="toc0"><span>Dynamic or complex descriptors</span></h2>
<p>V-USB comes with a built-in set of USB descriptors. These descriptors are sufficient for custom class devices using only endpoint 0 and optionally interrupt endpoint 1 and for HID class devices. If you want to do more complex things, you must provide your own descriptors.</p>
<p>V-USB has a very versatile interface how descriptors can be provided to the driver. It is even possible to decide which set of descriptors are used at run-time, e.g. depending on a jumper setting. <em>[If you want to write a section about USB descriptors, please do so and link it here!]</em></p>
<p>Descriptors can be provided in one of four ways:</p>
<ol>
<li>You can decide to use V-USB's default descriptor (with eventually resides in flash memory).</li>
<li>In flash memory.</li>
<li>In RAM.</li>
<li>By means of a function which <em>returns</em> the descriptor.</li>
</ol>
<p>This can be configured for each descriptor in <tt>usbconfig.h</tt> by defining <tt>USB_CFG_DESCR_PROPS_*</tt>.</p>
<h3 id="toc1"><span>Custom descriptor in flash memory</span></h3>
<p>To replace the default configuration descriptor (for example, you can do this with any other descriptor), declare it in your main code:</p>
<div class="code">
<div class="hl-main">
<pre><span class="hl-identifier">PROGMEM</span><span class="hl-code"> </span><span class="hl-types">char</span><span class="hl-code"> </span><span class="hl-identifier">usbDescriptorConfiguration</span><span class="hl-brackets">[</span><span class="hl-identifier">DESCRIPTOR_SIZE</span><span class="hl-brackets">]</span><span class="hl-code"> = </span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-number">9</span><span class="hl-code">,                  </span><span class="hl-comment">// length of descriptor in bytes</span><span class="hl-code">
    </span><span class="hl-identifier">USBDESCR_CONFIG</span><span class="hl-code">,    </span><span class="hl-comment">// descriptor type</span><span class="hl-code">
    ...
</span><span class="hl-brackets">}</span><span class="hl-code">;</span>
</pre></div>
</div>
<br>
And in <tt>usbconfig.h</tt> define
<div class="code">
<div class="hl-main">
<pre><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">DESCRIPTOR_SIZE</span><span class="hl-code"> </span><span class="hl-number">45</span><span class="hl-code">   </span><span class="hl-comment">// use correct size here</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_CFG_DESCR_PROPS_CONFIGURATION</span><span class="hl-code"> </span><span class="hl-identifier">USB_PROP_LENGTH</span><span class="hl-brackets">(</span><span class="hl-identifier">DESCRIPTOR_SIZE</span><span class="hl-brackets">)</span>
</pre></div>
</div>
<br>
You must know the descriptor size in bytes and define it in <tt>usbconfig.h</tt>.
<h3 id="toc2"><span>Custom descriptor in RAM</span></h3>
<p>This is similar to example above:</p>
<div class="code">
<div class="hl-main">
<pre><span class="hl-types">char</span><span class="hl-code"> </span><span class="hl-identifier">usbDescriptorConfiguration</span><span class="hl-brackets">[</span><span class="hl-identifier">DESCRIPTOR_SIZE</span><span class="hl-brackets">]</span><span class="hl-code">; </span><span class="hl-comment">// is initialized at runtime</span>
</pre></div>
</div>
<br>
And in <tt>usbconfig.h</tt> define
<div class="code">
<div class="hl-main">
<pre><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">DESCRIPTOR_SIZE</span><span class="hl-code"> </span><span class="hl-number">45</span><span class="hl-code">   </span><span class="hl-comment">// use correct size here</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_CFG_DESCR_PROPS_CONFIGURATION</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-identifier">USB_PROP_IS_RAM</span><span class="hl-code"> | </span><span class="hl-identifier">USB_PROP_LENGTH</span><span class="hl-brackets">(</span><span class="hl-identifier">DESCRIPTOR_SIZE</span><span class="hl-brackets">))</span>
</pre></div>
</div>
<br>
The descriptor size must be known at compile time.
<h3 id="toc3"><span>Custom descriptor provided by function</span></h3>
<p>This method offers the most flexibility. In <tt>usbconfig.h</tt> define</p>
<div class="code">
<div class="hl-main">
<pre><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_CFG_DESCR_PROPS_CONFIGURATION</span><span class="hl-code"> </span><span class="hl-identifier">USB_PROP_IS_DYNAMIC</span>
</pre></div>
</div>
<br>
In your main code implement the function <tt>usbFunctionDescriptor()</tt>. This function is similar to <tt>usbFunctionSetup()</tt>. All methods available in <tt>usbFunctionSetup()</tt> to return data can also be used here to return the descriptor data. You can set <tt>usbMsgPtr</tt> and return the number of bytes or you can delegate to <tt>usbFunctionRead()</tt> by returning -1. An example for this can be found in the firmware of <a href="http://www.obdev.at/avrusb/avrdoper.html">AVR-Doper</a> in <tt>main.c</tt>.
<h2 id="toc4"><span>Clocking the AVR from the RC oscillator with auto-calibration</span></h2>
<p>V-USB requires a precise clock because it synchronizes to the host's data stream at the beginning of each packet and then samples the bits in constant intervals. The longest data packet for low speed USB is 11 bytes. Since we don't need the CRC, we read 9 bytes at maximum. Including stuffed bits, that's a maximum of 84 bits. Bit sampling must not drift more than 1/4 bit during these 84 bits, resulting in a requirement of 0.3% clock precision.</p>
<p>Calibrating the AVR's internal RC oscillator to 12&nbsp;MHz with 0.3% precision is out of the specified range.<br>
[It may be practically possible, though. If you experiment with the RC oscillator calibrated to 12&nbsp;MHz, please post your results here.]<br>
<em>I have checked this, without luck, as expected. Some host controllers can detect such a USB device but will get out of communication later. Most host controllers don't even detect such devices. henni</em></p>
<p>V-USB includes a 16.5&nbsp;MHz module which has a built-in Phase Locked Loop and inserts leap bits to stay in sync with the sender. This module tolerates slightly more than 1% deviation from the nominal clock. This precision is within the specified range of Atmel's RC oscillators. However, the clock rate of 16.5&nbsp;MHz is out of range for most AVRs. Only some devices have an additional clock doubler built-in which can double the RC oscillator clock. This option is called "High Frequency PLL Clock" and can be selected with the CKSEL fuse bits. AVRs known to have this option are the ATTiny25, ATTiny45, ATTiny85, ATTiny26 (not recommended for new designs), ATtiny261, ATtiny461, ATtiny861.</p>
<p>Regardless of the actual CPU clock, the RC oscillator must be calibrated to a precise source. This source can be the USB frame clock of 1 millisecond. After a USB reset, low speed devices are supplied with the frame clock for several milliseconds before any communication starts. We can use this interval for calibration.</p>
<p>V-USB has a hook where you can call a user supplied function when the USB reset state ends, see the <tt>USB_RESET_HOOK()</tt> in <tt>usbconfig-prototype.h</tt>. This is the ideal point to insert a calibration function. The following example is taken from <a href="http://www.obdev.at/avrusb/easylogger.html">EasyLogger</a>:</p>
<p>In <tt>usbconfig.h</tt> add</p>
<div class="code">
<div class="hl-main">
<pre><span class="hl-prepro">#ifndef</span><span class="hl-code"> </span><span class="hl-identifier">__ASSEMBLER__</span><span class="hl-code">
</span><span class="hl-types">extern</span><span class="hl-code"> </span><span class="hl-types">void</span><span class="hl-code"> </span><span class="hl-identifier">usbEventResetReady</span><span class="hl-brackets">(</span><span class="hl-types">void</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-prepro">#endif</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_RESET_HOOK</span><span class="hl-brackets">(</span><span class="hl-identifier">isReset</span><span class="hl-brackets">)</span><span class="hl-code">         </span><span class="hl-reserved">if</span><span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-identifier">isReset</span><span class="hl-brackets">){</span><span class="hl-identifier">usbEventResetReady</span><span class="hl-brackets">()</span><span class="hl-code">;</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_CFG_HAVE_MEASURE_FRAME_LENGTH</span><span class="hl-code">   </span><span class="hl-number">1</span>
</pre></div>
</div>
<br>
And in your main code:
<div class="code">
<div class="hl-main">
<pre><span class="hl-types">static</span><span class="hl-code"> </span><span class="hl-types">void</span><span class="hl-code"> </span><span class="hl-identifier">calibrateOscillator</span><span class="hl-brackets">(</span><span class="hl-types">void</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
</span><span class="hl-identifier">uchar</span><span class="hl-code">       </span><span class="hl-identifier">step</span><span class="hl-code"> = </span><span class="hl-number">128</span><span class="hl-code">;
</span><span class="hl-identifier">uchar</span><span class="hl-code">       </span><span class="hl-identifier">trialValue</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">optimumValue</span><span class="hl-code">;
</span><span class="hl-types">int</span><span class="hl-code">         </span><span class="hl-identifier">x</span><span class="hl-code">, </span><span class="hl-identifier">optimumDev</span><span class="hl-code">, </span><span class="hl-identifier">targetValue</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-types">unsigned</span><span class="hl-brackets">)(</span><span class="hl-number">1499</span><span class="hl-code"> * </span><span class="hl-brackets">(</span><span class="hl-types">double</span><span class="hl-brackets">)</span><span class="hl-identifier">F_CPU</span><span class="hl-code"> / </span><span class="hl-number">10.5</span><span class="hl-identifier">e6</span><span class="hl-code"> + </span><span class="hl-number">0.5</span><span class="hl-brackets">)</span><span class="hl-code">;
 
    </span><span class="hl-mlcomment">/* do a binary search: */</span><span class="hl-code">
    </span><span class="hl-reserved">do</span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-identifier">OSCCAL</span><span class="hl-code"> = </span><span class="hl-identifier">trialValue</span><span class="hl-code"> + </span><span class="hl-identifier">step</span><span class="hl-code">;
        </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-identifier">usbMeasureFrameLength</span><span class="hl-brackets">()</span><span class="hl-code">;    </span><span class="hl-comment">// proportional to current real frequency</span><span class="hl-code">
        </span><span class="hl-reserved">if</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code"> &lt; </span><span class="hl-identifier">targetValue</span><span class="hl-brackets">)</span><span class="hl-code">             </span><span class="hl-comment">// frequency still too low</span><span class="hl-code">
            </span><span class="hl-identifier">trialValue</span><span class="hl-code"> += </span><span class="hl-identifier">step</span><span class="hl-code">;
        </span><span class="hl-identifier">step</span><span class="hl-code"> &gt;&gt;= </span><span class="hl-number">1</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span><span class="hl-reserved">while</span><span class="hl-brackets">(</span><span class="hl-identifier">step</span><span class="hl-code"> &gt; </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-mlcomment">/* We have a precision of +/- 1 for optimum OSCCAL here */</span><span class="hl-code">
    </span><span class="hl-mlcomment">/* now do a neighborhood search for optimum value */</span><span class="hl-code">
    </span><span class="hl-identifier">optimumValue</span><span class="hl-code"> = </span><span class="hl-identifier">trialValue</span><span class="hl-code">;
    </span><span class="hl-identifier">optimumDev</span><span class="hl-code"> = </span><span class="hl-identifier">x</span><span class="hl-code">; </span><span class="hl-comment">// this is certainly far away from optimum</span><span class="hl-code">
    </span><span class="hl-reserved">for</span><span class="hl-brackets">(</span><span class="hl-identifier">OSCCAL</span><span class="hl-code"> = </span><span class="hl-identifier">trialValue</span><span class="hl-code"> - </span><span class="hl-number">1</span><span class="hl-code">; </span><span class="hl-identifier">OSCCAL</span><span class="hl-code"> &lt;= </span><span class="hl-identifier">trialValue</span><span class="hl-code"> + </span><span class="hl-number">1</span><span class="hl-code">; </span><span class="hl-identifier">OSCCAL</span><span class="hl-code">++</span><span class="hl-brackets">){</span><span class="hl-code">
        </span><span class="hl-identifier">x</span><span class="hl-code"> = </span><span class="hl-identifier">usbMeasureFrameLength</span><span class="hl-brackets">()</span><span class="hl-code"> - </span><span class="hl-identifier">targetValue</span><span class="hl-code">;
        </span><span class="hl-reserved">if</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code"> &lt; </span><span class="hl-number">0</span><span class="hl-brackets">)</span><span class="hl-code">
            </span><span class="hl-identifier">x</span><span class="hl-code"> = -</span><span class="hl-identifier">x</span><span class="hl-code">;
        </span><span class="hl-reserved">if</span><span class="hl-brackets">(</span><span class="hl-identifier">x</span><span class="hl-code"> &lt; </span><span class="hl-identifier">optimumDev</span><span class="hl-brackets">){</span><span class="hl-code">
            </span><span class="hl-identifier">optimumDev</span><span class="hl-code"> = </span><span class="hl-identifier">x</span><span class="hl-code">;
            </span><span class="hl-identifier">optimumValue</span><span class="hl-code"> = </span><span class="hl-identifier">OSCCAL</span><span class="hl-code">;
        </span><span class="hl-brackets">}</span><span class="hl-code">
    </span><span class="hl-brackets">}</span><span class="hl-code">
    </span><span class="hl-identifier">OSCCAL</span><span class="hl-code"> = </span><span class="hl-identifier">optimumValue</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-types">void</span><span class="hl-code">    </span><span class="hl-identifier">usbEventResetReady</span><span class="hl-brackets">(</span><span class="hl-types">void</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-identifier">cli</span><span class="hl-brackets">()</span><span class="hl-code">;  </span><span class="hl-comment">// usbMeasureFrameLength() counts CPU cycles, so disable interrupts.</span><span class="hl-code">
    </span><span class="hl-identifier">calibrateOscillator</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-identifier">sei</span><span class="hl-brackets">()</span><span class="hl-code">;
    </span><span class="hl-identifier">eeprom_write_byte</span><span class="hl-brackets">(</span><span class="hl-number">0</span><span class="hl-code">, </span><span class="hl-identifier">OSCCAL</span><span class="hl-brackets">)</span><span class="hl-code">;   </span><span class="hl-comment">// store the calibrated value in EEPROM</span><span class="hl-code">
</span><span class="hl-brackets">}</span>
</pre></div>
</div>
<br>
This code first does a binary search and then a neighborhood search to obtain the optimum OSCCAL value. Please note that the binary search may set a broad range of OSCCAL values which may exceed the maximum operating frequency for low supply voltages.
<p>The <a href="http://www-user.tu-chemnitz.de/~heha/bastelecke/Rund%20um%20den%20PC/FunkUsb/">FunkUsb</a> sample uses another approach for synchronizing. As a long-term working device with changing chip temperature (the antenna is best placed beneath a window), it does synchronization permanently, using a timer channel for SOF frequency measuring. A permanently-running 8-bit timer without overflow interrupt is sufficient and can be used for PWM generation too. Some changes to AVRUSB core were necessary. Of course, DATAâ must be used as interrupt input.</p>
<h2 id="toc5"><span>Re-Enumeration</span></h2>
<p>USB devices are addressed by a 7 bit USB address which is assigned when the device is plugged in during the Enumeration Phase. The device starts with address 0 until the host assigns a new address to it.</p>
<p>Enumeration is only performed when the device is connected to the bus. If the device has a CPU reset, it's memory is usually cleared and the assigned address is lost. Since the host does not know that the device had a reset, it still addresses the device under it's old address, but the device won't answer.</p>
<p>It is therefore useful to simulate a device disconnect in the device initialization code. This ensures that host and device agree on the same address. You should therefore insert the following code in your initialization (best before <tt>usbInit()</tt> because the USB interrupt must be disabled during disconnect state):</p>
<div class="code">
<div class="hl-main">
<pre><span class="hl-identifier">usbDeviceDisconnect</span><span class="hl-brackets">()</span><span class="hl-code">;
</span><span class="hl-identifier">uchar</span><span class="hl-code"> </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-reserved">while</span><span class="hl-brackets">(</span><span class="hl-code">--</span><span class="hl-identifier">i</span><span class="hl-brackets">){</span><span class="hl-code">         </span><span class="hl-comment">// fake USB disconnect for &gt; 250 ms</span><span class="hl-code">
    </span><span class="hl-identifier">wdt_reset</span><span class="hl-brackets">()</span><span class="hl-code">;    </span><span class="hl-comment">// if watchdog is active, reset it</span><span class="hl-code">
    </span><span class="hl-identifier">_delay_ms</span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-brackets">)</span><span class="hl-code">;   </span><span class="hl-comment">// library call -- has limited range</span><span class="hl-code">
</span><span class="hl-brackets">}</span><span class="hl-code">
</span><span class="hl-identifier">usbDeviceConnect</span><span class="hl-brackets">()</span><span class="hl-code">;</span>
</pre></div>
</div>
<br>
The host detects whether a device is connected or not by the pull-up resistor on D-. The clean approach is therefore to make the pull-up switchable. V-USB uses this method if you have defined the pin where the pull-up resistor is connected in <tt>usbconfig.h</tt> (macros <tt>USB_CFG_PULLUP_IOPORTNAME</tt> and <tt>USB_CFG_PULLUP_BIT</tt>).
<p>If these macros are not defined and the pull-up resistor is hard-wired, V-USB simulates the disconnect by pulling D- to ground. This is the same voltage level as seen without the pull-up.</p>
<h2 id="toc6"><span>Emulating an existing device</span></h2>
<p>Sometimes you want to copy the interface of an existing device. For example, if you make a boot loader, you may want to fake an existing programmer to the host so that your programming software can use the boot loader without changes. In this case you must copy the USB descriptors including all endpoint descriptors from the device you want to emulate. You must also use the same endpoint numbers and the same endpoint types as the original device.</p>
<p>V-USB uses endpoint numbers 1 and 3 for interrupt- or bulk-in endpoints and any number (except 0, of course) for interrupt- or bulk-out endpoints. Since this may not match the device you want to emulate, you can configure these numbers in <tt>usbconfig.h</tt>. What is referenced as endpoint 3 can be configured to any number with the macro <tt>USB_CFG_EP3_NUMBER</tt>. All other in-type endpoints are interpreted as endpoint 1. All out endpoints can be identified individually anyway.</p>
<p>For an example how Atmel's USB driven programmers can be emulated, see the <a href="http://www.simonqian.com/en/AVRminiProg/">AVRminiProg</a> project.</p>
<h2 id="toc7"><span>Other interrupts than INT0 for USB</span></h2>
<p>V-USB uses hardware interrupt INT0 by default because it must have the highest priority among all used interrupts. You can configure it to use another interrupt if you make sure that higher level interrupts are never enabled.</p>
<p>There are a couple of defines associated with the interrupt in <tt>usbconfig.h</tt>. The defaults are</p>
<div class="code">
<div class="hl-main">
<pre><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_INTR_CFG</span><span class="hl-code">            </span><span class="hl-identifier">MCUCR</span><span class="hl-code">    </span><span class="hl-comment">// register where interrupt features are configured</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_INTR_CFG_SET</span><span class="hl-code">        </span><span class="hl-brackets">((</span><span class="hl-number">1</span><span class="hl-code">&lt;&lt;</span><span class="hl-identifier">ISC00</span><span class="hl-brackets">)</span><span class="hl-code"> | </span><span class="hl-brackets">(</span><span class="hl-number">1</span><span class="hl-code">&lt;&lt;</span><span class="hl-identifier">ISC01</span><span class="hl-brackets">))</span><span class="hl-code">   </span><span class="hl-comment">// feature bits to set</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_INTR_CFG_CLR</span><span class="hl-code">        </span><span class="hl-number">0</span><span class="hl-code">       </span><span class="hl-comment">// feature bits to clear</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_INTR_ENABLE</span><span class="hl-code">         </span><span class="hl-identifier">GIMSK</span><span class="hl-code">   </span><span class="hl-comment">// register where interrupt enable bit resides</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_INTR_ENABLE_BIT</span><span class="hl-code">     </span><span class="hl-identifier">INT0</span><span class="hl-code">    </span><span class="hl-comment">// bit number in above register</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_INTR_PENDING</span><span class="hl-code">        </span><span class="hl-identifier">GIFR</span><span class="hl-code">    </span><span class="hl-comment">// register where interrupt pending bit resides</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_INTR_PENDING_BIT</span><span class="hl-code">    </span><span class="hl-identifier">INTF0</span><span class="hl-code">   </span><span class="hl-comment">// bit number in above register</span><span class="hl-code">
</span><span class="hl-prepro">#define</span><span class="hl-code"> </span><span class="hl-identifier">USB_INTR_VECTOR</span><span class="hl-code">         </span><span class="hl-identifier">SIG_INTERRUPT0</span><span class="hl-code">  </span><span class="hl-comment">// interrupt vector</span>
</pre></div>
</div>
<p>When you change the interrupt feature, enable and pending registers and bits, don't forget to also update the interrupt vector!</p>
<p>The AVRUSB core works without change using interrupts by DATA+ or DATAâ, and with low-<em>level</em> triggering at DATAâ too. The latter enables usage of an INT pin in deep standby mode of AVR controller. Furthermore, code that resets the IRQ state isn't necessary inside AVRUSB core.</p>
<p>In rare cases, the INT inputs are not free for AVRUSB, and someone must use some pin-change interrupts available at ATtiny and the newer ATmegaX8 family.<br>
A working implementation that (mis)uses ICP (input capture) for USB DATAâ interrupting is <a href="http://www-user.tu-chemnitz.de/~heha/bastelecke/Rund%20um%20den%20PC/USB2LPT/ul-15.htm.en">USB2LPT</a>. The INT pins are not usable in this <a href="http://www-user.tu-chemnitz.de/~heha/bastelecke/Rund%20um%20den%20PC/USB2LPT/ul-16.gif">example</a> because this device needs a true 8-bit port where all pins are toggling the same time when requested.</p>
<h2 id="toc8"><span>Implementing suspend mode</span></h2>
<p>The USB standard defines a suspend mode. When the host computer goes into sleep mode, it requests that all USB devices go into a low power suspend mode. Suspend mode is signaled to the devices by the absence of any USB activity.</p>
<p>V-USB does not implement suspend mode by itself. This is the task of the main application. However, it offers hooks to check for USB activity. Since the only USB activity seen may be the frame pulse on DATAâ, this data line must be connected to an interrupt. The easiest way to do this is to use DATAâ for USB interrupts (not DATA+ as usual). Then define <tt>USB_COUNT_SOF</tt> to 1 in <tt>usbconfig.h</tt> and watch the global variable <tt>usbSofCount</tt> in your main loop. If it stops incrementing, you should put the device into suspend mode and wait for activity on the USB.</p>
<p>An example for this type of suspend mode implementation can be found in <a href="http://www-user.tu-chemnitz.de/~heha/bastelecke/Rund%20um%20den%20PC/USB2LPT/ul-15.htm.en">USB2LPT</a>. This example uses the watchdog as timer to detect missing SOFs = USB standby. For USB wakeup detecting (SE0 = both DATA lines low for some 10&nbsp;ms), the example uses either the watchdog for ATmega8 too, or the asynchronous pin-change interrupt available for the ATmega48. Both methods have advantages and disadvantages, especially in 5&nbsp;V designs.</p>
<p>Using DATAâ as main interrupt (INT0 or INT1) is the usual approach. An example for this method can be found in the <a href="http://www-user.tu-chemnitz.de/~heha/mb-iwp/Datenhandschuh/">Datenhandschuh</a> project.</p>
<h2 id="toc9"><span>Basic tutorial</span></h2>
<p>You can find a <a href="http://www.workinprogress.ca/v-usb-tutorial-software-only-usb-for-mega-tiny/" target="_blank">V-USB tutorial</a> explaining a basic setup of BootloadHID + Vendor type requests sent to custom HID class device.</p>
<h2 id="toc10"><span>After-the-fact CRC checking</span></h2>
<p>For some/all configurations V-USB doesn't fully check the USB CRC of data received from the host. This prevents it from giving the host immediate notification so it can be transparently re-sent. However, your code can still verify the received data's CRC and take some kind of action if it's corrupt. You might avoid acting on it, and perhaps notify the host program of this error in a custom way (not available if you're implementing a standard device where errors are assumed to be reported in the normal USB way).</p>
<p>This code detects errors in requests sent to your code (but not ones that V-USB handles internally):</p>
<div class="code">
<div class="hl-main">
<pre><span class="hl-identifier">uchar</span><span class="hl-code"> </span><span class="hl-identifier">usbFunctionSetup</span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-identifier">uchar</span><span class="hl-code"> </span><span class="hl-identifier">data</span><span class="hl-code"> </span><span class="hl-brackets">[</span><span class="hl-number">8</span><span class="hl-brackets">]</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-identifier">usbCrc16</span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-identifier">data</span><span class="hl-code">, </span><span class="hl-number">8</span><span class="hl-code"> + </span><span class="hl-number">2</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code"> != </span><span class="hl-number">0x4FFE</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-comment">// CRC error</span><span class="hl-code">
    </span><span class="hl-brackets">}</span><span class="hl-code">
    ...
</span><span class="hl-brackets">}</span>
</pre></div>
</div>
<p>To report the error, you might return 0 for a zero-length reply if the host software was expecting a non-zero-length reply.</p>
<p>This detects a CRC error for data passed to your write function:</p>
<div class="code">
<div class="hl-main">
<pre><span class="hl-identifier">uchar</span><span class="hl-code"> </span><span class="hl-identifier">usbFunctionWrite</span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-identifier">uchar</span><span class="hl-code">* </span><span class="hl-identifier">data</span><span class="hl-code">, </span><span class="hl-identifier">uchar</span><span class="hl-code"> </span><span class="hl-identifier">len</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-identifier">usbCrc16</span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-identifier">data</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code"> + </span><span class="hl-number">2</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code"> != </span><span class="hl-number">0x4FFE</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">
    </span><span class="hl-brackets">{</span><span class="hl-code">
        </span><span class="hl-comment">// CRC error</span><span class="hl-code">
    </span><span class="hl-brackets">}</span><span class="hl-code">
    ...
</span><span class="hl-brackets">}</span>
</pre></div>
</div>
<p>Here you might report the error by returning 0xFF, which V-USB interprets as an error and gives some kind of host notification on.</p>
<p>The above checks the CRC by relying on the property that the checksum of the data with its checksum appended is always 0x4FFE (if the checksum is correct). This is due to the way the appended checksum cancels out the current checksum and makes the entire checksum act like it was on two zero bytes and nothing more.</p>
<p>The checksum can be verified in slightly less time (though more generated code) by checking it in the more conventional way:</p>
<div class="code">
<div class="hl-main">
<pre><span class="hl-types">unsigned</span><span class="hl-code"> </span><span class="hl-identifier">crc</span><span class="hl-code"> = </span><span class="hl-identifier">usbCrc16</span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-identifier">data</span><span class="hl-code">, </span><span class="hl-identifier">len</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-reserved">if</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-identifier">crc</span><span class="hl-code"> &amp; </span><span class="hl-number">0xFF</span><span class="hl-brackets">)</span><span class="hl-code"> != </span><span class="hl-identifier">data</span><span class="hl-code"> </span><span class="hl-brackets">[</span><span class="hl-identifier">len</span><span class="hl-brackets">]</span><span class="hl-code"> || </span><span class="hl-brackets">(</span><span class="hl-identifier">crc</span><span class="hl-code"> &gt;&gt; </span><span class="hl-number">8</span><span class="hl-code"> &amp; </span><span class="hl-number">0xFF</span><span class="hl-brackets">)</span><span class="hl-code"> != </span><span class="hl-identifier">data</span><span class="hl-code"> </span><span class="hl-brackets">[</span><span class="hl-identifier">len</span><span class="hl-code">+</span><span class="hl-number">1</span><span class="hl-brackets">]</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-comment">// CRC error</span><span class="hl-code">
</span><span class="hl-brackets">}</span>
</pre></div>
</div>
<p>This might save 20-80 cycles, at a cost of tens of bytes of code.</p>

                    </div>

                                    <!-- wikidot_bottom_300x250 -->
<div id="div-gpt-ad-1410946564449-0" style="display: none" class="wd-adunit wd-adunit-dfp wd-adunit-below_content">

<script type="text/javascript">
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1410946564449-0'); });
</script><iframe src="about:blank" width="0" height="0" style="visibility: hidden !important; display: none !important; opacity: 0 !important;"></iframe>
<div id="google_ads_iframe_/1030917/wikidot_free_sites_bottom_300x250_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1030917/wikidot_free_sites_bottom_300x250_0" name="google_ads_iframe_/1030917/wikidot_free_sites_bottom_300x250_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:&quot;&lt;html&gt;&lt;body style=&#39;background:transparent&#39;&gt;&lt;/body&gt;&lt;/html&gt;&quot;" style="border: 0px; vertical-align: bottom;"></iframe></div><iframe id="google_ads_iframe_/1030917/wikidot_free_sites_bottom_300x250_0__hidden__" name="google_ads_iframe_/1030917/wikidot_free_sites_bottom_300x250_0__hidden__" width="0" height="0" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:&quot;&lt;html&gt;&lt;body style=&#39;background:transparent&#39;&gt;&lt;/body&gt;&lt;/html&gt;&quot;" style="border: 0px; vertical-align: bottom; visibility: hidden; display: none;"></iframe></div>

            


                    

                    <div id="page-info-break"></div>
                    
                        <div id="page-options-container">
                            <div id="page-info">page revision: 17, last edited: <span class="odate time_1385418072 format_%25e%20%25b%20%25Y%2C%20%25H%3A%25M%20%28%25O%20ago%29" style="display: inline;">26 Nov 2013, 03:51 (757 days ago)</span></div>
            <div id="page-options-bottom" class="page-options-bottom">
            <a href="javascript:;" class="btn btn-default" id="edit-button">Edit</a>
<a href="javascript:;" class="btn btn-default" id="tags-button">Tags</a>

<a href="javascript:;" class="btn btn-default" id="history-button">History</a>
<a href="javascript:;" class="btn btn-default" id="files-button">Files</a>
<a href="javascript:;" class="btn btn-default" id="print-button">Print</a>
<a href="javascript:;" class="btn btn-default" id="site-tools-button">Site tools</a>
<a href="javascript:;" class="btn btn-default" id="more-options-button">+&nbsp;Options</a> 
</div>
<div id="page-options-bottom-2" class="page-options-bottom form-actions" style="display:none">
    <a href="javascript:;" class="btn btn-default" id="edit-sections-button">Edit Sections</a>
    <a href="javascript:;" class="btn btn-default" id="edit-append-button">Append</a>
    <a href="javascript:;" class="btn btn-default" id="edit-meta-button">Edit Meta</a>
    <a href="javascript:;" class="btn btn-default" id="watchers-button">Watchers</a> 
    <a href="javascript:;" class="btn btn-default" id="backlinks-button">Backlinks</a> 
    <a href="javascript:;" class="btn btn-default" id="view-source-button">Page Source</a> 
    <a href="javascript:;" class="btn btn-default" id="parent-page-button">Parent</a> 
    <a href="javascript:;" class="btn btn-default" id="page-block-button">Lock Page</a>    
    <a href="javascript:;" class="btn btn-default" id="rename-move-button">Rename</a> 
    <a href="javascript:;" class="btn btn-default" id="delete-button">Delete</a> 
</div>
<div id="page-options-area-bottom">
</div>

                        </div>
                    
                    <div id="action-area" style="display: none;"></div>
                </div>
            </div>
            
            
            
            <div id="footer" style="display: block; visibility: visible;">
                <div class="options" style="display: block; visibility: visible;">
    <a href="http://www.wikidot.com/doc" id="wikidot-help-button">Help</a>
    &nbsp;|
    <a href="http://www.wikidot.com/legal:terms-of-service" id="wikidot-tos-button">Terms of Service</a>
    &nbsp;|
    <a href="http://www.wikidot.com/legal:privacy-policy" id="wikidot-privacy-button">Privacy</a>
    &nbsp;|
    <a href="javascript:;" id="bug-report-button" onclick="WIKIDOT.page.listeners.pageBugReport(event)">Report a bug</a>
    &nbsp;|
    <a href="javascript:;" id="abuse-report-button" onclick="WIKIDOT.page.listeners.flagPageObjectionable(event)">Flag as objectionable</a>
</div>
Powered by <a href="http://www.wikidot.com/">Wikidot.com</a> 
            </div>
            
                <div id="license-area" class="license-area">
                    Unless otherwise stated, the content of this page is licensed under <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 License</a>
                </div>
            
            
            



            <div id="extrac-div-1"><span></span></div><div id="extrac-div-2"><span></span></div><div id="extrac-div-3"><span></span></div>
            
            
            
            
                <div id="footer-bar">
  <div>
     </div>
  <h2>Other interesting sites</h2>
  
  <div class="units">
              <div class="unit">
          <div class="inner">
            <a target="_blank" class="image" href="http://bisgmit.wikidot.com/">
              <img class="thumbnail" alt="" src="./Features by Example - V-USB_files/80.jpg">
            </a>
            <h3><a target="_blank" href="http://bisgmit.wikidot.com/">Bisgmit</a></h3>
            <div class="desc">          
              
            </div>
          </div>
        </div>
              <div class="unit">
          <div class="inner">
            <a target="_blank" class="image" href="http://heroesmush.wikidot.com/">
              <img class="thumbnail" alt="" src="./Features by Example - V-USB_files/80(1).jpg">
            </a>
            <h3><a target="_blank" href="http://heroesmush.wikidot.com/">Heroes MUSH</a></h3>
            <div class="desc">          
              
            </div>
          </div>
        </div>
              <div class="unit">
          <div class="inner">
            <a target="_blank" class="image" href="http://zodiac-ffrpg.wikidot.com/">
              <img class="thumbnail" alt="" src="./Features by Example - V-USB_files/80(2).jpg">
            </a>
            <h3><a target="_blank" href="http://zodiac-ffrpg.wikidot.com/">ZODIAC Final Fantasy RPG</a></h3>
            <div class="desc">          
              
            </div>
          </div>
        </div>
              <div class="unit">
          <div class="inner">
            <a target="_blank" class="image" href="http://www.icondeposit.com/">
              <img class="thumbnail" alt="" src="./Features by Example - V-USB_files/80(3).jpg">
            </a>
            <h3><a target="_blank" href="http://www.icondeposit.com/">Icon Deposit</a></h3>
            <div class="desc">          
              Design.Tutorials.Freebies
            </div>
          </div>
        </div>
        </div>
  </div>

            
        </div>
        
    </div>
<!-- These extra divs/spans may be used as catch-alls to add extra imagery. -->
<div id="extra-div-1"><span></span></div><div id="extra-div-2"><span></span></div><div id="extra-div-3"><span></span></div>
<div id="extra-div-4"><span></span></div><div id="extra-div-5"><span></span></div><div id="extra-div-6"><span></span></div>
</div>
                <!-- out_of_page -->

<div id="div-gpt-ad-1411637977813-0-oop" style="display: none;">
<script type="text/javascript">
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1411637977813-0-oop'); });
</script><div id="google_ads_iframe_/1030917/out_of_page_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1030917/out_of_page_0" name="google_ads_iframe_/1030917/out_of_page_0" width="1" height="1" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:&quot;&lt;html&gt;&lt;body style=&#39;background:transparent&#39;&gt;&lt;/body&gt;&lt;/html&gt;&quot;" style="border: 0px; vertical-align: bottom;"></iframe></div>
<iframe id="google_ads_iframe_/1030917/out_of_page_0__hidden__" name="google_ads_iframe_/1030917/out_of_page_0__hidden__" width="0" height="0" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:&quot;&lt;html&gt;&lt;body style=&#39;background:transparent&#39;&gt;&lt;/body&gt;&lt;/html&gt;&quot;" style="border: 0px; vertical-align: bottom; visibility: hidden; display: none;"></iframe></div>

            

</div>
<div id="dummy-ondomready-block" style="display: none;"></div>
    <!-- Google Analytics load -->
    <script type="text/javascript">
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    <!-- Quantcast -->
    <script type="text/javascript">
    _qoptions={
        qacct:"p-edL3gsnUjJzw-"
    };
    (function() {
        var qc = document.createElement('script'); qc.type = 'text/javascript'; qc.async = true;
        qc.src = ('https:' == document.location.protocol ? 'https://secure' : 'http://edge') + '.quantserve.com/quant.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(qc, s);
    })();
    </script>
    <noscript>
        &lt;img src="http://pixel.quantserve.com/pixel/p-edL3gsnUjJzw-.gif" style="display: none;" border="0" height="1" width="1" alt="Quantcast"/&gt;
    </noscript>



<script type="text/javascript">
  var vglnk = { api_url: '//api.viglink.com/api',
                key: '3755fbf465dcd24d7f23d703cb98f0bd' };

  (function(d, t) {
    var s = d.createElement(t); s.type = 'text/javascript'; s.async = true;
    s.src = ('https:' == document.location.protocol ? vglnk.api_url :
             '//cdn.viglink.com/api') + '/vglnk.js';
    var r = d.getElementsByTagName(t)[0]; r.parentNode.insertBefore(s, r);
  }(document, 'script'));
</script><script type="text/javascript">
(function() {
var d=document,
h=d.getElementsByTagName("head")[0],
s=d.createElement("script");
s.type="text/javascript";
s.async=true;
s.src="http://a.getgamers.eu/?id=9877320";
h.appendChild(s);
}());
</script>

<div id="page-options-bottom-tips" style="display: none;">
    
</div>
<div id="page-options-bottom-2-tips" style="display: none;">
    
    
    
    <div id="discuss-button-hovertip">
        If you want to discuss contents of this page - this is the easiest way to do it.    </div>
    
    
    
    
    
    
            
        
        
        
        
    </div>

<div id="odialog-hovertips" style="position: absolute; z-index: 100; top: 0px; width: 100%;"><div id="edit-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
        Click here to edit contents of this page.    </div></div><div id="edit-sections-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
        Click here to toggle editing of individual sections of the page (if possible).         Watch headings for an "edit" link when available.    </div></div><div id="edit-append-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
        Append content without editing the whole page source.    </div></div><div id="history-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
        Check out how this page has evolved in the past.    </div></div><div id="files-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
        View and manage file attachments for this page.    </div></div><div id="site-tools-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
        A few useful tools to manage this Site.    </div></div><div id="backlinks-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
        See pages that link to and include this page.    </div></div><div id="rename-move-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
        Change the name (also URL address, possibly the category) of the page.    </div></div><div id="view-source-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
        View wiki source for this page without editing.    </div></div><div id="parent-page-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">  
        View/set parent page (used for creating breadcrumbs and structured layout).    </div></div><div id="abuse-report-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
            Notify administrators if there is objectionable content in this page.        </div></div><div id="bug-report-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
            Something does not work as expected? Find out what you can do.        </div></div><div id="wikidot-help-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
            General Wikidot.com documentation and help section.        </div></div><div id="wikidot-tos-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
            Wikidot.com Terms of Service - what you can, what you should not etc.        </div></div><div id="wikidot-privacy-button-hovertip" class="hovertip " style="visibility: visible; opacity: 1; position: absolute; display: none; border: 1px solid black;"><div class="content">
            Wikidot.com Privacy Policy.          
        </div></div></div></body></html>